/* ── SimpleFIN Setup ─────────────────────────────────────────────────────── */
.simplefin-setup {
  max-width: 560px; margin: 2rem auto; padding: 2.5rem;
  background: var(--bg-card); border: 1px solid var(--border-subtle);
  border-radius: 12px; text-align: center;
  box-shadow: 0 4px 24px rgba(26,23,20,0.07);
  animation: fadeUp 0.4s ease both;
}
.setup-icon { font-size: 3rem; margin-bottom: 1rem; }
.setup-title {
  font-family: var(--font-display); font-size: 1.35rem; font-weight: 600;
  letter-spacing: -0.02em; margin-bottom: 0.6rem; color: var(--text-primary);
}
.setup-desc { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 1.5rem; }
.setup-steps {
  text-align: left; list-style: decimal; padding-left: 1.25rem;
  margin-bottom: 1.75rem; display: flex; flex-direction: column; gap: 0.5rem;
}
.setup-steps li { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5; }
.setup-steps a { color: var(--accent); text-decoration: underline; text-underline-offset: 3px; }
.setup-steps strong { color: var(--text-primary); }
.setup-form { display: flex; flex-direction: column; gap: 0.85rem; }
.setup-token-input {
  width: 100%; padding: 0.85rem 1rem; background: var(--bg-secondary);
  border: 1px solid var(--border-input); border-radius: 8px;
  color: var(--text-primary); font-size: 0.8rem; font-family: monospace;
  resize: none; outline: none; transition: border-color 0.2s;
}
.setup-token-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(217,119,87,0.1); }
.setup-error {
  font-size: 0.8rem; color: var(--danger); background: rgba(220,38,38,0.06);
  border: 1px solid rgba(220,38,38,0.2); border-radius: 6px; padding: 0.65rem 0.85rem;
  text-align: left;
}

/* ── Page layout ─────────────────────────────────────────────────────────── */
.cash-page { animation: fadeUp 0.4s ease both; }
.cash-header-actions { display: flex; align-items: center; gap: 0.85rem; }
.last-synced { font-size: 0.68rem; color: var(--text-muted); }
.btn-sync {
  display: flex; align-items: center; gap: 0.4rem;
  padding: 0.5rem 1.1rem; background: transparent;
  border: 1px solid var(--border); color: var(--accent); border-radius: 8px;
  font-size: 0.75rem; font-weight: 500; cursor: pointer; transition: background 0.2s;
}
.btn-sync:hover { background: var(--accent-dim); }
.btn-sync:disabled { opacity: 0.6; cursor: not-allowed; }

/* ── Owner sections ──────────────────────────────────────────────────────── */
.owner-section { margin-bottom: 2rem; }
.owner-section-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 0.85rem; padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border-subtle);
}
.owner-label { font-size: 0.78rem; font-weight: 600; color: var(--text-secondary); letter-spacing: 0.02em; }
.owner-total { font-size: 0.9rem; font-weight: 600; color: var(--text-primary); }

/* ── Account Cards Grid ──────────────────────────────────────────────────── */
.accounts-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 12px;
}
.account-card {
  background: var(--bg-card); border: 1px solid var(--border-subtle);
  border-radius: 12px; padding: 1.25rem; cursor: pointer; position: relative;
  transition: border-color 0.2s, box-shadow 0.2s, transform 0.15s;
  box-shadow: 0 1px 8px rgba(26,23,20,0.05);
}
.account-card:hover {
  border-color: rgba(217,119,87,0.25); transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(26,23,20,0.1);
}
.account-card.selected {
  border-color: var(--accent); box-shadow: 0 0 0 3px rgba(217,119,87,0.1);
}
.account-card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem; }
.account-type-icon { font-size: 1.25rem; }
.account-owner-badge {
  font-size: 0.6rem; letter-spacing: 0.08em; text-transform: uppercase;
  padding: 0.18rem 0.55rem; border-radius: 20px;
  background: var(--accent-dim); color: var(--accent); border: 1px solid var(--border);
}
.account-institution { font-size: 0.68rem; color: var(--text-muted); margin-bottom: 0.2rem; }
.account-name { font-size: 0.88rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.85rem; }
.account-balance {
  font-family: var(--font-display); font-size: 1.5rem; font-weight: 700;
  letter-spacing: -0.02em; margin-bottom: 0.75rem; line-height: 1;
}
.account-balance.balance-positive { color: var(--text-primary); }
.account-balance.balance-negative { color: var(--danger); }
.balance-label { font-size: 0.65rem; font-weight: 400; color: var(--text-muted); }
.account-footer { display: flex; align-items: center; justify-content: space-between; }
.account-type-label { font-size: 0.65rem; color: var(--text-muted); text-transform: capitalize; }
.account-sync-date { font-size: 0.62rem; color: var(--text-muted); }
.account-edit-btn {
  position: absolute; top: 0.75rem; right: 0.75rem;
  background: none; border: none; color: var(--text-muted); cursor: pointer;
  font-size: 0.85rem; opacity: 0; transition: opacity 0.2s;
  padding: 0.2rem; border-radius: 4px;
}
.account-card:hover .account-edit-btn { opacity: 1; }

/* ── Transaction Panel ───────────────────────────────────────────────────── */
.txn-panel { animation: fadeUp 0.35s ease both; }
.txn-panel-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 1.25rem; gap: 1rem; flex-wrap: wrap;
}
.txn-panel-title-block { display: flex; align-items: center; gap: 1rem; }
.txn-back-btn {
  background: none; border: none; color: var(--accent); cursor: pointer;
  font-size: 0.82rem; font-weight: 500; padding: 0; transition: opacity 0.2s;
}
.txn-back-btn:hover { opacity: 0.7; }
.txn-panel-title { font-size: 1.1rem; font-weight: 600; color: var(--text-primary); letter-spacing: -0.01em; }
.txn-panel-inst { font-size: 0.7rem; color: var(--text-muted); display: block; }
.txn-panel-balance {
  font-family: var(--font-display); font-size: 1.5rem; font-weight: 700;
  color: var(--text-primary); letter-spacing: -0.02em;
}

/* Stats bar */
.txn-stats {
  display: flex; gap: 1px; background: var(--border-subtle);
  border: 1px solid var(--border-subtle); border-radius: 8px; overflow: hidden;
  margin-bottom: 1.25rem;
}
.txn-stat {
  flex: 1; background: var(--bg-card); padding: 0.85rem 1rem;
  display: flex; flex-direction: column; gap: 0.2rem;
}
.txn-stat-label { font-size: 0.6rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); }
.txn-stat-value { font-size: 1rem; font-weight: 600; color: var(--text-primary); }
.txn-stat-value.debit  { color: var(--danger); }
.txn-stat-value.credit { color: #16a34a; }

/* Controls */
.txn-controls {
  display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; align-items: center;
}
.txn-search {
  flex: 1; min-width: 160px; padding: 0.5rem 0.85rem;
  background: var(--bg-card); border: 1px solid var(--border-input); border-radius: 8px;
  color: var(--text-primary); font-size: 0.82rem; outline: none;
  transition: border-color 0.2s; font-family: var(--font-mono);
}
.txn-search:focus { border-color: var(--accent); }
.txn-filter, .txn-days { min-width: 130px; }
.btn-sync-txn, .btn-ai-cat {
  display: flex; align-items: center; gap: 0.35rem;
  padding: 0.5rem 0.9rem; border-radius: 8px; cursor: pointer;
  font-size: 0.72rem; font-weight: 500; transition: all 0.2s;
}
.btn-sync-txn {
  background: transparent; border: 1px solid var(--border); color: var(--text-secondary);
}
.btn-sync-txn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-dim); }
.btn-ai-cat {
  background: linear-gradient(135deg, rgba(217,119,87,0.12), rgba(201,106,46,0.08));
  border: 1px solid var(--border); color: var(--accent);
}
.btn-ai-cat:hover { background: var(--accent-dim); border-color: var(--accent); }
.btn-sync-txn:disabled, .btn-ai-cat:disabled { opacity: 0.5; cursor: not-allowed; }

/* Transaction list */
.txn-list {
  background: var(--bg-card); border: 1px solid var(--border-subtle);
  border-radius: 10px; overflow: hidden;
}
.txn-loading { display: flex; justify-content: center; padding: 3rem; }
.txn-empty {
  text-align: center; padding: 3rem; font-size: 0.85rem; color: var(--text-muted);
}
.txn-row {
  border-bottom: 1px solid var(--border-subtle); transition: background 0.15s;
}
.txn-row:last-child { border-bottom: none; }
.txn-row:hover { background: rgba(217,119,87,0.02); }
.txn-main {
  display: flex; align-items: flex-start; justify-content: space-between;
  padding: 0.85rem 1.1rem; gap: 0.75rem;
}
.txn-left { display: flex; align-items: flex-start; gap: 0.75rem; flex: 1; min-width: 0; }
.txn-category-pill {
  display: flex; align-items: center; gap: 0.3rem; flex-shrink: 0;
  padding: 0.2rem 0.6rem; border-radius: 20px; cursor: pointer;
  background: color-mix(in srgb, var(--cat-color, #6b7280) 12%, transparent);
  border: 1px solid color-mix(in srgb, var(--cat-color, #6b7280) 30%, transparent);
  color: var(--cat-color, #6b7280); font-size: 0.65rem; font-weight: 500;
  transition: opacity 0.15s; white-space: nowrap;
}
.txn-category-pill:hover { opacity: 0.8; }
.txn-cat-name { max-width: 90px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.txn-override-dot {
  width: 5px; height: 5px; border-radius: 50%; background: currentColor; flex-shrink: 0;
}
.txn-desc-block { display: flex; flex-direction: column; gap: 0.1rem; min-width: 0; }
.txn-desc { font-size: 0.82rem; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.txn-memo { font-size: 0.68rem; color: var(--text-muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.txn-right { display: flex; flex-direction: column; align-items: flex-end; gap: 0.15rem; flex-shrink: 0; }
.txn-amount { font-size: 0.9rem; font-weight: 600; }
.txn-amount.debit  { color: var(--text-primary); }
.txn-amount.credit { color: #16a34a; }
.txn-date { font-size: 0.65rem; color: var(--text-muted); }

/* Category picker */
.cat-picker {
  padding: 0.85rem 1.1rem 1.1rem; border-top: 1px solid var(--border-subtle);
  background: var(--bg-secondary); display: flex; flex-direction: column; gap: 0.75rem;
  max-height: 280px; overflow-y: auto;
}
.cat-group {}
.cat-group-label {
  font-size: 0.58rem; letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--text-muted); margin-bottom: 0.4rem;
}
.cat-group-items { display: flex; flex-wrap: wrap; gap: 0.35rem; }
.cat-option {
  padding: 0.3rem 0.7rem; border-radius: 20px; cursor: pointer;
  background: var(--bg-card); border: 1px solid var(--border-subtle);
  color: var(--text-secondary); font-size: 0.72rem; transition: all 0.15s;
}
.cat-option:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-dim); }
.cat-option.selected { background: var(--accent-dim); border-color: var(--accent); color: var(--accent); }

/* ── Responsive ──────────────────────────────────────────────────────────── */
@media (max-width: 768px) {
  .accounts-grid { grid-template-columns: 1fr 1fr; gap: 8px; }
  .account-card { padding: 1rem; }
  .account-balance { font-size: 1.25rem; }
  .account-edit-btn { opacity: 1; }
  .txn-controls { gap: 0.4rem; }
  .txn-search { min-width: 100%; }
  .txn-cat-name { max-width: 60px; }
  .cash-header-actions { gap: 0.5rem; }
  .last-synced { display: none; }
}
@media (max-width: 480px) {
  .accounts-grid { grid-template-columns: 1fr; }
  .txn-main { flex-wrap: wrap; }
  .txn-right { flex-direction: row; gap: 1rem; align-items: center; width: 100%; justify-content: flex-end; }
}
